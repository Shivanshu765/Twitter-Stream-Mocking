<!--
  https://medium.com/@AlexanderObregon/enhancing-logging-with-log-and-slf4j-in-spring-boot-applications-f7e70c6e4cc7

  Spring Boot uses logback by default
  We need to configure log rotation directly in this file

  Spring Boot’s default log output is concise and developer-friendly.
  However, for specific requirements, you might want to customize the log pattern.

 -->
<configuration>
    <!-- Console Appender with pattern -->
    <appender name="STD_OUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>
                %d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n
            </pattern>
        </encoder>
    </appender>

    <!--File Appender with pattern-->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>myapp.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- daily rollover and up to 10MB per file -->
            <fileNamePattern>myapp.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <maxFileSize>10MB</maxFileSize>
            <maxHistory>10</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- log levels: trace -> debug -> info -> warn -> error -> fatal

    Each level is inclusive of the levels above it.
    For instance, if you set the level to WARN, you’ll also see ERROR messages,
    but not INFO, DEBUG, or TRACE.-->
    <!--
       (a.)The <root> logger provides a global default for logging, handling
           all logs not specifically configured elsewhere.

       (b.)<logger> elements: allow you to customize logging behavior for specific packages or classes,
           overriding the root logger's settings and potentially directing logs to different appenders.

           Setting additivity="false" prevents log events from being passed to parent appenders,
           meaning they will only be handled by the appenders explicitly attached to that specific logger.

           <logger name="streamevents" level="INFO" additivity ="false">
             <appender-ref ref="FILE" />
             <appender-ref ref="STD_OUT" />
          </logger>
    -->


    <root level="INFO">
        <appender-ref ref="FILE" />
        <appender-ref ref="STD_OUT" />
    </root>
</configuration>
